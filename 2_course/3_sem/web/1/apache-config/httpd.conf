ServerRoot "/usr/local/apache2"
Listen 80

LoadModule unixd_module modules/mod_unixd.so
User www-data
Group www-data

LoadModule mpm_event_module modules/mod_mpm_event.so
LoadModule authn_core_module modules/mod_authn_core.so
LoadModule authz_core_module modules/mod_authz_core.so
LoadModule log_config_module modules/mod_log_config.so
LoadModule env_module modules/mod_env.so
LoadModule proxy_module modules/mod_proxy.so
LoadModule proxy_fcgi_module modules/mod_proxy_fcgi.so
LoadModule dir_module modules/mod_dir.so
LoadModule mime_module modules/mod_mime.so

# Настройки безопасности
<Directory />
    AllowOverride none
    Require all denied
</Directory>

# Документный корень — если хотите отдавать index.html через Apache
DocumentRoot "/var/www"

<Directory "/var/www">
    Options Indexes FollowSymLinks
    AllowOverride None
    Require all granted
</Directory>

<IfModule dir_module>
    DirectoryIndex index.html
</IfModule>

# Логи в stdout/stderr (для Docker)
ErrorLog /proc/self/fd/2
LogLevel warn
CustomLog /proc/self/fd/1 combined

# Проксирование ВСЕХ запросов на Java FastCGI
<VirtualHost *:80>
    # Проксируем все запросы на Java-приложение
    ProxyPass "/" "fcgi://java-app:9001/"
    ProxyPassReverse "/" "fcgi://java-app:9001/"

    # Передаём QUERY_STRING в FastCGI
    <Location "/">
        ProxyFCGISetEnvIf "true" QUERY_STRING "%{QUERY_STRING}"
    </Location>
</VirtualHost>